<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Posts - Efe Ay</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600&display=swap');

        body {
            margin: 0;
            font-family: 'Plus Jakarta Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #FFDEE9 0%, #B5FFFC 100%);
            color: #222;
            opacity: 0;
            transition: opacity 0.6s ease, background 0.6s ease, color 0.6s ease;
        }
        body.visible {
            opacity: 1;
        }
        body.dark-mode {
            background: #121212;
            color: #ddd;
        }

        main {
            max-width: 920px;
            margin: 3rem auto;
            padding: 0 1.2rem;
        }
        h1 {
            text-align: center;
            color: #6a11cb;
            font-weight: 700;
            font-size: 2.4rem;
            margin-bottom: 3rem;
            letter-spacing: 1.2px;
        }

        article {
            background: rgba(255,255,255,0.95);
            border-radius: 16px;
            box-shadow: 0 8px 18px rgba(106, 17, 203, 0.18);
            padding: 1.6rem 2rem;
            margin-bottom: 2.8rem;
            position: relative;
            transition: box-shadow 0.3s ease;
        }
        article:hover {
            box-shadow: 0 14px 30px rgba(106, 17, 203, 0.35);
        }
        body.dark-mode article {
            background: rgba(25,25,25,0.9);
            box-shadow: 0 8px 20px #bb86fc60;
        }

        article h2 {
            color: #6a11cb;
            font-weight: 700;
            font-size: 1.8rem;
            margin-top: 0;
            margin-bottom: 0.7rem;
            letter-spacing: 0.03em;
        }
        article p.preview {
            font-size: 1rem;
            line-height: 1.6;
            max-height: 5.5em; /* ~3 satır */
            overflow: hidden;
            position: relative;
            color: #333;
            transition: max-height 0.45s cubic-bezier(0.4,0,0.2,1);
        }
        body.dark-mode article p.preview {
            color: #ccc;
        }
        article button.read-more {
            margin-top: 1rem;
            background: transparent;
            border: none;
            color: #6a11cb;
            font-weight: 700;
            font-size: 1.05rem;
            cursor: pointer;
            position: relative;
            padding: 0;
            user-select: none;
            transition: color 0.25s ease;
        }
        article button.read-more::after {
            content: "→";
            display: inline-block;
            margin-left: 6px;
            transform: translateX(0);
            transition: transform 0.3s ease;
        }
        article button.read-more:hover {
            color: #b338ff;
        }
        article button.read-more:hover::after {
            transform: translateX(6px);
        }

        /* Soldan açılan panel */
        #sidePanel {
            position: fixed;
            top: 0;
            left: -100%;
            width: 60vw;
            max-width: 480px;
            height: 100vh;
            background: rgba(255,255,255,0.85);
            backdrop-filter: saturate(180%) blur(14px);
            box-shadow: 5px 0 20px rgba(106,17,203,0.25);
            overflow-y: auto;
            transition: left 0.4s cubic-bezier(0.4,0,0.2,1);
            padding: 2.4rem 2.2rem;
            z-index: 9999;
            border-radius: 0 16px 16px 0;
        }
        body.dark-mode #sidePanel {
            background: rgba(25,25,25,0.85);
            box-shadow: 5px 0 30px #bb86fcaa;
            color: #ddd;
        }
        #sidePanel.open {
            left: 0;
        }

        #sidePanel h2 {
            color: #6a11cb;
            font-weight: 800;
            font-size: 2rem;
            margin-top: 0;
            margin-bottom: 1.4rem;
        }
        #sidePanel p {
            font-size: 1.1rem;
            line-height: 1.7;
            white-space: pre-line;
        }

        #sidePanel button.closeBtn {
            position: absolute;
            top: 18px;
            right: 22px;
            background: transparent;
            border: none;
            font-size: 2.4rem;
            font-weight: 800;
            color: #6a11cb;
            cursor: pointer;
            transition: color 0.3s ease;
        }
        #sidePanel button.closeBtn:hover {
            color: #b338ff;
        }
        body.dark-mode #sidePanel button.closeBtn {
            color: #bb86fc;
        }
        body.dark-mode #sidePanel button.closeBtn:hover {
            color: #e0aaff;
        }

        /* Overlay arka plan */
        #overlay {
            position: fixed;
            top:0;
            left:0;
            width: 100vw;
            height: 100vh;
            background: rgba(0,0,0,0.35);
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease;
            z-index: 9998;
        }
        #overlay.active {
            opacity: 1;
            visibility: visible;
        }

        /* Scrollbar - modern */
        #sidePanel::-webkit-scrollbar {
            width: 9px;
        }
        #sidePanel::-webkit-scrollbar-track {
            background: transparent;
        }
        #sidePanel::-webkit-scrollbar-thumb {
            background: #6a11cbcc;
            border-radius: 20px;
        }
        body.dark-mode #sidePanel::-webkit-scrollbar-thumb {
            background: #bb86fcc2;
        }
    </style>
</head>
<body>
<div id="nav-placeholder"></div>

<main>
    <h1>Yazılarım</h1>

    <article data-fulltext="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed non risus. Suspendisse lectus tortor, dignissim sit amet, adipiscing nec, ultricies sed, dolor. Praesent convallis. Donec bibendum, libero at vehicula consequat, orci lacus viverra nunc, et egestas augue est sed urna. Aliquam erat volutpat. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas.">
        <h2>Yazı Başlığı 1</h2>
        <p class="preview">
            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed non risus. Suspendisse lectus tortor, dignissim sit amet...
        </p>
        <button class="read-more" aria-expanded="false" aria-controls="sidePanel">Devamını Oku</button>
    </article>

    <article data-fulltext="Bu ikinci yazının tam metni biraz daha uzun. Burada kullanıcı rahat rahat okuyabilmeli. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus et diam a erat sollicitudin suscipit. Nulla facilisi. Sed faucibus purus a lacus laoreet, a cursus lacus bibendum.">
        <h2>Yazı Başlığı 2</h2>
        <p class="preview">
            Bu ikinci yazının tam metni biraz daha uzun. Burada kullanıcı rahat rahat okuyabilmeli...
        </p>
        <button class="read-more" aria-expanded="false" aria-controls="sidePanel">Devamını Oku</button>
    </article>

</main>

<div id="sidePanel" role="dialog" aria-modal="true" aria-labelledby="sidePanelTitle" tabindex="-1">
    <button class="closeBtn" aria-label="Kapat">&times;</button>
    <h2 id="sidePanelTitle"></h2>
    <p id="sidePanelContent"></p>
</div>

<div id="overlay"></div>

<script>
    // Navbar'ı fetch ile yükle
    fetch('navbar.html')
        .then(res => res.text())
        .then(html => {
            document.getElementById('nav-placeholder').innerHTML = html;

            // Nav yüklendikten sonra toggle butonu ve linklere event ekle
            const toggleBtn = document.getElementById('toggleBtn');

            // Gece modu başlangıcı
            const darkMode = localStorage.getItem('darkMode');
            if (darkMode === 'true') {
                document.body.classList.add('dark-mode');
            }

            // Toggle butonu
            toggleBtn.addEventListener('click', () => {
                document.body.classList.toggle('dark-mode');
                if (document.body.classList.contains('dark-mode')) {
                    localStorage.setItem('darkMode', 'true');
                } else {
                    localStorage.setItem('darkMode', 'false');
                }
            });

            toggleBtn.addEventListener('keydown', (e) => {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    toggleBtn.click();
                }
            });

            // Sayfa linklerine fade animasyonu
            document.querySelectorAll('nav a').forEach(link => {
                link.addEventListener('click', e => {
                    e.preventDefault();
                    const href = link.getAttribute('href');
                    document.body.classList.remove('visible');
                    setTimeout(() => {
                        window.location.href = href;
                    }, 500);
                });
            });
        })
        .catch(e => console.error('Navbar yüklenemedi:', e));

    // Sayfa açılış animasyonu
    window.addEventListener('DOMContentLoaded', () => {
        document.body.classList.add('visible');
    });

    // Soldan açılan panel ve overlay
    const sidePanel = document.getElementById('sidePanel');
    const sidePanelTitle = document.getElementById('sidePanelTitle');
    const sidePanelContent = document.getElementById('sidePanelContent');
    const overlay = document.getElementById('overlay');
    const closeBtn = sidePanel.querySelector('.closeBtn');

    // Butonları seçip event ata
    document.addEventListener('click', e => {
        if (e.target.classList.contains('read-more')) {
            const article = e.target.closest('article');
            const fullText = article.getAttribute('data-fulltext');
            const title = article.querySelector('h2').textContent;

            sidePanelTitle.textContent = title;
            sidePanelContent.textContent = fullText;

            sidePanel.classList.add('open');
            overlay.classList.add('active');

            // Odak panelde
            sidePanel.focus();

            e.target.setAttribute('aria-expanded', 'true');
        }
    });

    function closePanel() {
        sidePanel.classList.remove('open');
        overlay.classList.remove('active');
        document.querySelectorAll('button.read-more').forEach(btn => btn.setAttribute('aria-expanded', 'false'));
    }

    closeBtn.addEventListener('click', closePanel);
    overlay.addEventListener('click', closePanel);

    // Escape ile kapatma
    document.addEventListener('keydown', e => {
        if (e.key === 'Escape' && sidePanel.classList.contains('open')) {
            closePanel();
        }
    });
</script>
</body>
</html>
